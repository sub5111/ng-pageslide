/*! angular-pageslide-directive 2016-04-06 */
angular.module("pageslide-directive",[]).directive("pageslide",["$document","$timeout",function(a,b){return{restrict:"EAC",transclude:!1,scope:{psOpen:"=?",psAutoClose:"=?",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psZindex:"@",psSqueeze:"@",psCloak:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@",psStaticBackdrop:"@"},link:function(b,c,d){function e(a){if(i.bodyClass){var b=i.className+"-body",c=new RegExp(" "+b+"-closed| "+b+"-open");l.className=l.className.replace(c,""),l.className+=" "+b+"-"+a}}function f(c,d){if(c&&0!==c.style.width)switch(b.psStaticBackdrop&&(document.getElementsByTagName("html")[0].style.overflow="auto"),d.side){case"right":c.style.transform="translate3d("+d.size+", 0, 0)",d.squeeze&&(l.style.right="0px"),d.push&&(l.style.right="0px",l.style.left="0px");break;case"left":c.style.transform="translate3d(-"+d.size+", 0, 0)",d.squeeze&&(l.style.left="0px"),d.push&&(l.style.left="0px",l.style.right="0px");break;case"top":c.style.transform="translate3d(0, -"+d.size+", 0)",d.squeeze&&(l.style.top="0px"),d.push&&(l.style.top="0px",l.style.bottom="0px");break;case"bottom":c.style.transform="translate3d(0, "+d.size+", 0)",d.squeeze&&(l.style.bottom="0px"),d.push&&(l.style.bottom="0px",l.style.top="0px")}b.psOpen=!1,d.keyListener&&a.off("keydown",h),e("closed")}function g(c,d){if(b.psStaticBackdrop&&(document.getElementsByTagName("html")[0].style.overflow="hidden"),0!==c.style.width){switch(d.side){case"right":c.style.transform="translate3d(0, 0, 0)",d.squeeze&&(l.style.right=d.size),d.push&&(l.style.right=d.size,l.style.left="-"+d.size);break;case"left":c.style.transform="translate3d(0, 0, 0)",d.squeeze&&(l.style.left=d.size),d.push&&(l.style.left=d.size,l.style.right="-"+d.size);break;case"top":c.style.transform="translate3d(0, 0, 0)",d.squeeze&&(l.style.top=d.size),d.push&&(l.style.top=d.size,l.style.bottom="-"+d.size);break;case"bottom":c.style.transform="translate3d(0, 0, 0)",d.squeeze&&(l.style.bottom=d.size),d.push&&(l.style.bottom=d.size,l.style.top="-"+d.size)}b.psOpen=!0,d.keyListener&&a.on("keydown",h),e("open")}}function h(a){var b=27,c=a.keyCode||a.which;c===b&&f(k,i)}var i={};i.side=b.psSide||"right",i.speed=b.psSpeed||"0.5",i.size=b.psSize||"300px",i.zindex=b.psZindex||1e3,i.className=b.psClass||"ng-pageslide",i.squeeze=Boolean(b.psSqueeze)||!1,i.push=Boolean(b.psPush)||!1,i.container=b.psContainer||!1,i.keyListener=Boolean(b.psKeyListener)||!1,i.bodyClass=b.psBodyClass||!1,i.staticBackdrop=b.psStaticBackdrop||!1,c.addClass(i.className);var j=null,k=null,l=i.container?document.getElementById(i.container):document.body;if(e("closed"),k=c[0],"div"!==k.tagName.toLowerCase()&&"pageslide"!==k.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");if(0===k.children.length)throw new Error("You have to content inside the <pageslide>");switch(j=angular.element(k.children),l.appendChild(k),k.style.zIndex=i.zindex,k.style.position=i.container!==!1?"absolute":"fixed",k.style.width=i.size,k.style.overflow="hidden",k.style.height=i.size,k.style.transitionDuration=i.speed+"s",k.style.webkitTransitionDuration=i.speed+"s",k.style.transitionProperty="width, height, transform",i.squeeze&&(l.style.position="absolute",l.style.transitionDuration=i.speed+"s",l.style.webkitTransitionDuration=i.speed+"s",l.style.transitionProperty="top, bottom, left, right"),i.side){case"right":k.style.height=d.psCustomHeight||"100%",k.style.top=d.psCustomTop||"0px",k.style.bottom=d.psCustomBottom||"0px",k.style.right=d.psCustomRight||"0px";break;case"left":k.style.height=d.psCustomHeight||"100%",k.style.top=d.psCustomTop||"0px",k.style.bottom=d.psCustomBottom||"0px",k.style.left=d.psCustomLeft||"0px";break;case"top":k.style.width=d.psCustomWidth||"100%",k.style.left=d.psCustomLeft||"0px",k.style.top=d.psCustomTop||"0px",k.style.right=d.psCustomRight||"0px";break;case"bottom":k.style.width=d.psCustomWidth||"100%",k.style.bottom=d.psCustomBottom||"0px",k.style.left=d.psCustomLeft||"0px",k.style.right=d.psCustomRight||"0px"}b.$watch("psOpen",function(a){a?g(k,i):f(k,i)}),b.$watch("psSize",function(a,b){b!==a&&(i.size=a,g(k,i))}),b.$on("$destroy",function(){k.parentNode===l&&l.removeChild(k)}),b.psAutoClose&&(b.$on("$locationChangeStart",function(){f(k,i)}),b.$on("$stateChangeStart",function(){f(k,i)}))}}}]);