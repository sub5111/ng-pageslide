/*! angular-pageslide-directive 2016-04-08 */
angular.module("pageslide-directive",[]).directive("pageslide",["$document","$timeout",function(a,b){return{restrict:"EAC",transclude:!1,scope:{psOpen:"=?",psAutoClose:"=?",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psZindex:"@",psSqueeze:"@",psCloak:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@",psStaticBackdrop:"@",psBackdropClass:"@"},link:function(b,c,d){function e(){l.backdropClass&&(m=document.createElement("div"),m.className=l.backdropClass,m.onclick=function(){b.$apply(b.psOpen=!1)},o.appendChild(m))}function f(a){if(l.bodyClass){var b="pageslide",c=new RegExp(" "+b+"-closed| "+b+"-open");o.className=o.className.replace(c,""),o.className+=" "+b+"-"+a}}function g(){m.style.display="block"}function h(){m.style.display="none"}function i(c,d){if(c&&0!==c.style.width)switch(b.psStaticBackdrop&&(document.getElementsByTagName("html")[0].style.overflow=""),d.backdropClass&&h(),d.side){case"right":c.style.transform="translate3d("+d.size+", 0, 0)",d.squeeze&&(o.style.right="0px"),d.push&&(o.style.right="0px",o.style.left="0px");break;case"left":c.style.transform="translate3d(-"+d.size+", 0, 0)",d.squeeze&&(o.style.left="0px"),d.push&&(o.style.left="0px",o.style.right="0px");break;case"top":c.style.transform="translate3d(0, -"+d.size+", 0)",d.squeeze&&(o.style.top="0px"),d.push&&(o.style.top="0px",o.style.bottom="0px");break;case"bottom":c.style.transform="translate3d(0, "+d.size+", 0)",d.squeeze&&(o.style.bottom="0px"),d.push&&(o.style.bottom="0px",o.style.top="0px")}b.psOpen=!1,d.keyListener&&a.off("keydown",k),f("closed")}function j(c,d){if(b.psStaticBackdrop&&(document.getElementsByTagName("html")[0].style.overflow="hidden"),d.backdropClass&&g(),0!==c.style.width){switch(d.side){case"right":c.style.transform="translate3d(0, 0, 0)",d.squeeze&&(o.style.right=d.size),d.push&&(o.style.right=d.size,o.style.left="-"+d.size);break;case"left":c.style.transform="translate3d(0, 0, 0)",d.squeeze&&(o.style.left=d.size),d.push&&(o.style.left=d.size,o.style.right="-"+d.size);break;case"top":c.style.transform="translate3d(0, 0, 0)",d.squeeze&&(o.style.top=d.size),d.push&&(o.style.top=d.size,o.style.bottom="-"+d.size);break;case"bottom":c.style.transform="translate3d(0, 0, 0)",d.squeeze&&(o.style.bottom=d.size),d.push&&(o.style.bottom=d.size,o.style.top="-"+d.size)}b.psOpen=!0,d.keyListener&&a.on("keydown",k),f("open")}}function k(a){var b=27,c=a.keyCode||a.which;c===b&&i(n,l)}var l={};l.side=b.psSide||"right",l.speed=b.psSpeed||"0.5",l.size=b.psSize||"300px",l.zindex=b.psZindex||1e3,l.className=b.psClass||"ng-pageslide",l.squeeze=Boolean(b.psSqueeze)||!1,l.push=Boolean(b.psPush)||!1,l.container=b.psContainer||!1,l.keyListener=Boolean(b.psKeyListener)||!1,l.bodyClass=b.psBodyClass||!1,l.staticBackdrop=b.psStaticBackdrop||!1,l.backdropClass=b.psBackdropClass||"",c.addClass(l.className);var m=null,n=null,o=l.container?document.getElementById(l.container):document.body;if(n=c[0],"div"!==n.tagName.toLowerCase()&&"pageslide"!==n.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");switch(o.appendChild(n),n.style.zIndex=l.zindex,n.style.position=l.container!==!1?"absolute":"fixed",n.style.width=l.size,n.style.overflow="hidden",n.style.height=l.size,n.style.transitionDuration=l.speed+"s",n.style.webkitTransitionDuration=l.speed+"s",n.style.transitionProperty="width, height, transform",l.squeeze&&(o.style.position="absolute",o.style.transitionDuration=l.speed+"s",o.style.webkitTransitionDuration=l.speed+"s",o.style.transitionProperty="top, bottom, left, right"),l.side){case"right":n.style.height=d.psCustomHeight||"100%",n.style.top=d.psCustomTop||"0px",n.style.bottom=d.psCustomBottom||"0px",n.style.right=d.psCustomRight||"0px";break;case"left":n.style.height=d.psCustomHeight||"100%",n.style.top=d.psCustomTop||"0px",n.style.bottom=d.psCustomBottom||"0px",n.style.left=d.psCustomLeft||"0px";break;case"top":n.style.width=d.psCustomWidth||"100%",n.style.left=d.psCustomLeft||"0px",n.style.top=d.psCustomTop||"0px",n.style.right=d.psCustomRight||"0px";break;case"bottom":n.style.width=d.psCustomWidth||"100%",n.style.bottom=d.psCustomBottom||"0px",n.style.left=d.psCustomLeft||"0px",n.style.right=d.psCustomRight||"0px"}e(),f("closed"),b.$watch("psOpen",function(a){a?j(n,l):i(n,l)}),b.$watch("psSize",function(a,b){b!==a&&(l.size=a,j(n,l))}),b.$on("$destroy",function(){n.parentNode===o&&o.removeChild(n)}),b.psAutoClose&&(b.$on("$locationChangeStart",function(){i(n,l)}),b.$on("$stateChangeStart",function(){i(n,l)}))}}}]);